<html>
    <head>
        <meta charset="utf8">
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
        <link  rel="stylesheet" href="style.css">
        <script src="message.js" defer></script>
        <title>Chihuo's Websocket Chat Web App</title>
    </head>
    <body>
        <div id="mask" class="mask"></div>
        <div id="iewindow" class="window">
            <h1 id="ie-reject">你是IE浏览器！</h1>
            <h1 id="ie-reject-desc">对不起，本页面不支持使用Internet Explorer(IE)进行浏览。请您更换Google Chrome,Firefox或者其他现代浏览器</h1>
        </div>
        <div id="mobwindow" class="window">
            <h2 id="mob-reject">你是移动端浏览器！</h2>
            <h2 id="mob-reject-desc">对不起，由于移动端浏览器不支持JavaScript连接WebSocket，请您使用电脑访问。<br>如果您是电脑或者是Chrome等Webkit手机浏览器？<a href="javascript:hiddenwindow('mobwindow')">点我</a></h2>
        </div>          
        <div id="connectwindow" class="window">
            <div id="serversettings">
                <span id="ss-exit" class="exit-button" onclick="hiddenwindow('connectwindow')" title="关闭">X</span>
                <h1 id="tips-connectserver" class="t-center p-l5px">连接服务器</h1>
                <span id="tips-serversite">服务器地址</span>
                <br>
                <div id="connectfrom" class="t-center">
                    <input id="serversite" name="ss" type="text" placeholder="输入以ws://或者wss://开头的链接">
                    <br>
                    <input id="checkstorage" onchange="changeStorage()" type="checkbox">保存服务器（使用LocalStorage）
                    <br>
                    <button onclick="connectws()" value="connect" id="connectbutton" class="t-center">连接</button>
                </div>
            </div> 
        </div>
        <div id="aboutwindow" class="window">
            <span id="aw-exit" class="exit-button" onclick="hiddenwindow('aboutwindow')" title="关闭">X</span>
            <h1 id="about-title" class="t-center">关于</h1>
            <img id="about-cwcimage" alt="cwc-logo" title="cwc-logo" src="cwc-logo.png">
            <h2 id="about-softtitle-en">Chihuo's Websocket Chat</h2>
            <h3 id="about-softtitle-cn">赤火的网络套接字聊天程序</h3>
            <h3 id="about-version">版本:V0.0.2 Alpha(EU20200819a)</h3>
            <h4 id="about-version-desc">更新日期:2020年8月19日</h4>
            <div id="github"><a href="https://github.com/konnyaku-studio-team/chihuos-websocketchat-client-web/">在GitHub上开源：Fork，Star我！</a></div>
            <div id="author">作者:chihuo2104</div>
            <div id="github-ch"><a href="https://github.com/chihuo2104/">GitHub账号</a></div>
        </div>
        <div id="toolwindow" class="window">
            <span id="tw-exit" class="exit-button" onclick="hiddenwindow('toolwindow')" title="关闭">X</span>
            <button onclick="hiddenwindow('toolwindow');openwindow('connectwindow')" value="connectserver" id="connectbutton">连接服务器</button>
            <button onclick="hiddenwindow('toolwindow');openwindow('aboutwindow')" value="aboutus" id="aboutusbutton">关于这个&我们</button>
        </div>
        <!--[if IE]>
            <script>
                var connectwindow=document.getElementById("connectwindow");
                connectwindow.style.display="none";
                var iewindow=document.getElementById("iewindow");
                var mask=document.getElementById("mask");
                iewindow.style.display="block";
            </script>
        <![endif]-->
        <div id="container">
            <div id="messagecontrol">
                以下是某些聊天信息:
            </div>
            <div id="insertmessage">
                输入聊天内容:<input id="messageinput" name="mi" onkeypress="getKey();">
                <button onclick="commitws()" value="commit" id="commitbutton">提交</button>
                <button onclick="openwindow('toolwindow')"  value="tools" id="toolsbutton">工具箱</button>
            </div>
        </div>
        <script>
            if(document.body.clientWidth<480){
                var connectwindow=document.getElementById("connectwindow");
                connectwindow.style.display="none";
                var mobwindow=document.getElementById("mobwindow");
                var mask=document.getElementById("mask");
                mobwindow.style.display="block";
            } 
        </script>
        </body>
</html>